<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/admin-layout :: adminHead('Admin - News Form')}"></head>
<body>

<div th:replace="~{fragments/admin-layout :: adminTopbar}"></div>

<div th:with="pageTitle=${pageTitle}, pageSubtitle=${pageSubtitle}"
     th:replace="~{fragments/admin-layout :: adminShell('news')}">

    <div th:fragment="adminContent">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <div></div>
            <a class="btn btn-outline-secondary" th:href="@{/admin/news}">← Quay lại</a>
        </div>

        <div class="card shadow-sm">
            <div class="card-body">

                <form th:object="${bdhNews}"
                      th:action="${bdhMode == 'create'} ? @{/admin/news/create} : @{/admin/news/edit/{id}(id=${bdhNews.id})}"
                      method="post">

                    <div class="mb-3">
                        <label class="form-label">Tiêu đề</label>
                        <input type="text" class="form-control" th:field="*{title}" placeholder="VD: Khuyến mãi cuối năm...">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Tóm tắt</label>
                        <textarea class="form-control" rows="3" th:field="*{summary}" placeholder="VD: Giảm 20%..."></textarea>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Nội dung</label>
                        <textarea class="form-control" rows="8" th:field="*{content}" placeholder="Nhập nội dung chi tiết..."></textarea>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Image URL</label>
                        <input type="text" class="form-control" th:field="*{imageUrl}" placeholder="https://...">
                    </div>

                    <div class="alert alert-light border small mb-3" th:if="${bdhMode == 'edit'}">
                        <div>
                            Tạo lúc:
                            <b th:text="${bdhNews.createdAt != null ? #temporals.format(bdhNews.createdAt, 'dd/MM/yyyy HH:mm') : '-'}"></b>
                        </div>
                        <div>
                            Cập nhật lúc:
                            <b th:text="${bdhNews.updatedAt != null ? #temporals.format(bdhNews.updatedAt, 'dd/MM/yyyy HH:mm') : '-'}"></b>
                        </div>
                    </div>

                    <div class="d-flex gap-2">
                        <button class="btn btn-primary" type="submit"
                                th:text="${bdhMode == 'create'} ? 'Tạo mới' : 'Lưu cập nhật'"></button>
                        <a class="btn btn-outline-secondary" th:href="@{/admin/news}">Hủy</a>
                    </div>

                </form>

            </div>
        </div>

    </div>
</div>

<div th:replace="~{fragments/admin-layout :: adminFooter}"></div>
<div th:replace="~{fragments/admin-layout :: adminScripts}"></div>
</body>
</html>
